# Revenue Calculation and Analysis

This project aims to analyze an online store's sales data, compute various revenue metrics, and provide the results in JSON format. The codebase includes the primary script `task.py` for performing the calculations and generating the output, and a test script `test.py` to verify the correctness of the implemented functionality. Both scripts are also Dockerized for easy deployment and execution.

## Table of Contents
1. [Overview](#overview)
2. [Input and Output](#input-and-output)
3. [Questions Addressed](#questions-addressed)
4. [Design Principles](#design-principles)
5. [How to Execute](#how-to-execute)
    - [Executing `task.py`](#executing-taskpy)
    - [Executing `test.py`](#executing-testpy)
6. [Docker Instructions](#docker-instructions)
    - [Building Docker Containers](#building-docker-containers)
    - [Running Docker Containers](#running-docker-containers)
7. [Notes](#notes)

## Overview

The primary goal of this project is to compute and analyze revenue data from an online store. The script `task.py` performs the following tasks:
- Computes total monthly revenue.
- Computes total revenue per product.
- Computes total revenue per customer.
- Identifies the top 10 customers by revenue generated.

The results are provided in JSON format, which is commonly used for API calls and is easy to understand and process.

## Input and Output

**Input:**
- The input data is a CSV file named `orders.csv` with the following columns:
  - `order_id`
  - `customer_id`
  - `order_date`
  - `product_id`
  - `product_name`
  - `product_price`
  - `quantity`

**Output:**
- The output is a JSON file named `output.json` that contains the answers to the following questions:
  1. Total revenue generated by the online store for each month.
  2. Total revenue generated by each product.
  3. Total revenue generated by each customer.
  4. Top 10 customers by revenue generated.

## Questions Addressed

1. Compute the total revenue generated by the online store for each month in the dataset.
2. Compute the total revenue generated by each product in the dataset.
3. Compute the total revenue generated by each customer in the dataset.
4. Identify the top 10 customers by revenue generated.

## Design Principles

- **Well-structured and Readable Code:** The code is organized into functions with clear responsibilities.
- **Error Handling:** Basic error handling is implemented to catch exceptions during data loading and processing.
- **Pythonic Practices:** Utilizes appropriate Python libraries and follows best practices.
- **Comprehensive Testing:** The test script covers all major functionalities.
- **JSON Output:** Chosen for its ubiquity in API responses and ease of understanding.

## How to Execute

### Executing `task.py`

1. Ensure you have Python 3.12 installed.
2. Install the required libraries:
   ```bash
   pip install pandas
   ```
3. Place `orders.csv` in the same directory as `task.py`.
4. Run `task.py`:
   ```bash
   python task.py
   ```
5. The output will be generated in `output.json`.

### Executing `test.py`

1. Ensure you have Python 3.12 installed.
2. Install the required libraries:
   ```bash
   pip install pandas
   ```
3. Place `orders.csv` and `task.py` in the same directory as `test.py`.
4. Run `test.py`:
   ```bash
   python test.py
   ```
5. You should see an "OK" message if all tests pass.

## Docker Instructions

### Building Docker Containers

Navigate to the directory containing the Dockerfiles and run the following commands:

```bash
# Build the Docker image for service-1 (task.py)
docker build -t service-1 -f Dockerfile.service-1 .

# Build the Docker image for service-2 (test.py)
docker build -t service-2 -f Dockerfile.service-2 .
```

### Running Docker Containers

Run the Docker containers using the built images:

```bash
# Run the container for service-1
docker run --name service-1-container service-1

# Run the container for service-2
docker run --name service-2-container service-2
```

By following these instructions, you can execute the revenue calculations, run the tests, and deploy the applications using Docker. 

## Notes
- `Testing Module`: The test.py script was created with the assistance of an AI co-pilot.
- `Task Code`: The task.py script was developed following standard documentation and best practices.
- `Docker Knowledge`: The Dockerization process was carried out based on basic documentation, considering limited and bare minimum Docker knowledge.
By following these instructions, you can execute the revenue calculations, run the tests, and deploy the applications using Docker.

---